(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{646:function(e,t,a){e.exports=a.p+"static/media/receipt.d2a1ba6b.png"},647:function(e,t,a){"use strict";var n=a(124);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),c=(0,n(a(161)).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),r.default.createElement("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"})),"ZoomIn");t.default=c},688:function(e,t,a){"use strict";a.r(t);var n=a(36),r=a.n(n),c=a(62),o=a(22),i=a(53),l=a(0),u=a.n(l),m=a(236),s=a(158),d=a(647),p=a.n(d),g=a(328),f=a(646),h=a.n(f),b=a(240),E=a(690),v=a(250),y=a(244),O=a(123),j=Object(O.a)(function(e){return{formControl:{position:"absolute",top:function(e){return"".concat(e.top)},right:function(e){return"".concat(e.right)},margin:e.spacing(1),minWidth:120}}}),C=["all","daily","weekly","monthly","annually"];function k(e){var t=e.top,a=e.right,n=e.getDuration,r=j({top:t,right:a}),c=Object(l.useState)("all"),i=Object(o.a)(c,2),m=i[0],s=i[1];return u.a.createElement(b.a,{className:r.formControl},u.a.createElement(v.a,{id:"durlabel"},"Duration"),u.a.createElement(y.a,{labelId:"durlabel",value:m,name:"Duration",onChange:function(e){s(e.target.value),n(e.target.value)}},C.map(function(e,t){return u.a.createElement(E.a,{key:t,value:e},e)})))}var w=a(85),x=a(61),S=a(197),R=a(247),M=a(88),N=a(41),q=(a(385),a(86)),z=a(87),B=a(64),I=a(330),V=a(126),D=a(63),T=Object(O.a)(function(e){return{root:{height:"100vh"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}),U=N.b().shape({name:N.d().required("Name is required"),amount:N.a().required("Amount is required")}),W=function(e){var t=e.receipt,a=T(),n=Object(l.useState)(t.category),i=Object(o.a)(n,2),s=i[0],d=i[1],p=Object(l.useState)(""),g=Object(o.a)(p,2),f=g[0],h=(g[1],Object(w.a)()),b=h.isLoading,E=h.error,v=h.success,y=h.sendRequest,O=h.clearError,j=h.clearSuccess,C=Object(l.useContext)(x.a);var k=Object(M.a)({enableReinitialize:!0,initialValues:{name:t.name,amount:t.amount,category:t.category,date:t.date},validationSchema:U,onSubmit:function(){var a=Object(c.a)(r.a.mark(function a(n,c){var o;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:c.resetForm,"0"!==s&&(n.category=s);try{o="http://localhost:5000/api/"+"receipt/".concat(t._id),y(o,"PUT",JSON.stringify({title:n.name,amount:n.amount,category:n.category,date:n.date}),{"Content-Type":"application/json",Authorization:"Bearer "+C.token}),e.onReceiptUpload()}catch(E){D.a.logErrorInRollbar(E)}case 3:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}()}),N=k.handleSubmit,W=k.handleChange,A=k.handleBlur,F=k.isValid;return u.a.createElement(V.a,null,u.a.createElement(u.a.Fragment,null,u.a.createElement(q.a,{error:E,onClear:O}),u.a.createElement(z.a,{success:v,successMessage:f,onClear:j}),b&&u.a.createElement(B.a,{asOverlay:!0}),u.a.createElement(m.a,{container:!0,spacing:5,margin:3,direction:"column",alignItems:"center",justify:"center"},u.a.createElement("form",{onSubmit:N,noValidate:!0},u.a.createElement(m.a,{item:!0,xs:12},u.a.createElement(R.a,{required:!0,fullWidth:!0,defaultValue:t.title,id:"name",label:"Name",name:"name",type:"text",autoComplete:"name",onChange:W,onBlur:A,autoFocus:!0})),u.a.createElement(m.a,{item:!0,xs:12},u.a.createElement(R.a,{required:!0,fullWidth:!0,defaultValue:t.amount,id:"amount",label:"Amount",name:"amount",type:"number",onChange:W,onBlur:A})),u.a.createElement(m.a,{item:!0,xs:12},u.a.createElement("p",null,u.a.createElement("b",null,"Current category: ",t.category)),u.a.createElement(I.a,{name:"category",id:"category",title:"Category",dvalue:t.category,handleChange:function(e){d(e.target.value)}})),u.a.createElement(m.a,{item:!0,xs:12},u.a.createElement(R.a,{required:!0,fullWidth:!0,defaultValue:t.date.slice(0,10),id:"date",label:"Date",name:"date",type:"text",onChange:W,onBlur:A})),u.a.createElement(S.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,disabled:!F},"Save")))))};a.d(t,"default",function(){return J});var A=Object(O.a)(function(e){var t;return{pRel:{position:"relative"},imgRoot:{display:"flex",flexDirection:"column",alignItems:"center"},imgContainer:(t={width:"15rem",height:"15rem"},Object(i.a)(t,e.breakpoints.down("xs"),{width:"18rem",height:"18rem"}),Object(i.a)(t,"&:hover",{"& $imgMask":{opacity:.6},"& $imgIcon":{opacity:1}}),t),imgBackdrop:{position:"absolute",opacity:0,transition:e.transitions.create("opacity")},imgMask:{top:0,left:0,width:"100%",height:"100%",borderRadius:"0.8rem",backgroundColor:"#314f85"},imgIcon:{top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#fafafa",fontSize:"2rem"},img:{width:"100%",height:"100%",borderRadius:"0.8rem"}}}),F=function(){var e=(new Date).getTimezoneOffset(),t=Math.abs(Math.floor(e/60)),a=Math.abs(e%60);return"".concat(e>0?"-":"+").concat(t>9?t:"0"+t).concat(a>9?a:"0"+a)};function J(e){var t=A(),a=Object(l.useContext)(x.a),n=Object(w.a)().sendRequest,i=e.receiptCount,d=(e.onReceiptUpload,Object(l.useState)([])),f=Object(o.a)(d,2),b=f[0],E=f[1],v=Object(l.useState)("all"),y=Object(o.a)(v,2),O=y[0],j=y[1],C=Object(l.useState)(!1),S=Object(o.a)(C,2),R=S[0],M=S[1],N=Object(l.useState)(!1),q=Object(o.a)(N,2),z=q[0],B=(q[1],Object(l.useState)(null)),I=Object(o.a)(B,2),T=I[0],U=I[1],J=function(e){U(e),M(!0)};return Object(l.useEffect)(function(){(function(){var e=Object(c.a)(r.a.mark(function e(){var t,c,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=F(),c="http://localhost:5000/api/"+"user/receipts/".concat(O,"&").concat(t),e.next=5,n(c,"GET",null,{Authorization:"Bearer "+a.token});case 5:o=e.sent,E(o),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),D.a.logErrorInRollbar(e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(){return e.apply(this,arguments)}})()()},[a.token,n,O,i]),u.a.createElement(V.a,null,u.a.createElement(m.a,{container:!0,spacing:2,xs:12,lg:10,className:t.pRel},u.a.createElement(k,{top:"-4rem",right:"0",getDuration:function(e){j(e)}}),b.map(function(e,a){var n=e.date.slice(0,10),r=e.picture.length>0?e.picture[0]:h.a;return u.a.createElement(m.a,{item:!0,xs:!0,key:a+"-"+n,className:t.imgRoot},u.a.createElement(s.a,{className:t.imgContainer,onClick:function(){return J(a)}},u.a.createElement("img",{src:r,alt:"Receipt on ".concat(n),className:t.img}),u.a.createElement("span",{className:"".concat(t.imgBackdrop," ").concat(t.imgMask)}),u.a.createElement(p.a,{className:"".concat(t.imgBackdrop," ").concat(t.imgIcon)})),u.a.createElement("p",null,n))}),u.a.createElement(g.a,{size:"md",isOpen:R,handleOpen:J,handleClose:function(){M(!1)},title:"Modify Receipt"},u.a.createElement(W,{receipt:b[T],reloadTrans:z,onReceiptUpload:function(){e.onReceiptUpload(),M(!1)}}))))}}}]);
//# sourceMappingURL=9.e0ea9107.chunk.js.map