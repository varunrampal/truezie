(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{274:function(e,a,t){"use strict";var n=t(0),r=t.n(n),o=t(447),c=t.n(o),l=t(452),i=t.n(l),s=t(453),u=t.n(s),m=t(449),p=t.n(m),d=t(451),b=t.n(d),f=t(450),g=t.n(f),h=t(448),E=t.n(h),O={"Food & Drinks":r.a.createElement(c.a,null),Housing:r.a.createElement(E.a,null),Transportation:r.a.createElement(p.a,null),"Health Care":r.a.createElement(g.a,null),"Recreation & Entertainment":r.a.createElement(b.a,null),Grocery:r.a.createElement(i.a,null),Other:r.a.createElement(u.a,null)},v=Object(n.createContext)(O);a.a=v},328:function(e,a,t){"use strict";var n=t(0),r=t.n(n),o=t(673),c=t(674),l=t(675),i=t(676),s=t(235),u=t(123),m=t(329),p=t.n(m),d=Object(u.a)(function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}});a.a=function(e){var a=e.isOpen,t=e.size,n=e.handleClose,u=e.title,m=e.subtitle,b=e.children,f=d();return r.a.createElement("div",null,r.a.createElement(o.a,{id:"appDialog",fullWidth:!0,maxWidth:t,open:a,onClose:n,"aria-labelledby":"appDialog"},r.a.createElement(c.a,null,u,r.a.createElement(s.a,{"aria-label":"close",className:f.closeButton,onClick:n},r.a.createElement(p.a,null))),r.a.createElement(l.a,{dividers:!0},r.a.createElement(i.a,null,m),b)))}},330:function(e,a,t){"use strict";var n=t(0),r=t.n(n),o=t(274);t(454);a.a=function(e){var a=e.dvalue,t=Object(n.useContext)(o.a),c=Object.keys(t).map(function(e){return r.a.createElement("option",{key:e,value:e},e)});return r.a.createElement("select",{className:"select-text",defaultValue:a,id:"category",name:"category",onChange:e.handleChange},r.a.createElement("option",{value:"0"},"Select Category"),c)}},421:function(e,a,t){e.exports=t.p+"static/media/user.d3303ad0.png"},454:function(e,a,t){},685:function(e,a,t){"use strict";t.r(a);var n=t(22),r=t(53),o=t(273),c=t(0),l=t.n(c),i=t(243),s=t(237),u=t(236),m=t(677),p=t(123),d=t(40),b=t(12),f=t(667),g=t(668),h=Object(p.a)(function(e){return{appBar:Object(r.a)({},e.breakpoints.up("sm"),{width:function(e){var a=e.drawerWidth;return"calc(100% - ".concat(a,")")},marginLeft:function(e){return e.drawerWidth}}),toolbar:{display:"flex",justifyContent:"flex-end",backgroundColor:"#fafafa",color:"initial"}}});function E(e){var a=e.drawerWidth,t=e.children,n=h({drawerWidth:a});return l.a.createElement(f.a,{className:n.appBar},l.a.createElement(g.a,{className:n.toolbar},t))}var O=t(689),v=t(25),j=t(242),y=Object(p.a)(function(e){return{drawer:Object(r.a)({},e.breakpoints.up("sm"),{width:function(e){return e.drawerWidth},flexShrink:0}),utilbar:Object(o.a)({},e.mixins.toolbar,{backgroundColor:"#314f85",opacity:.4}),drawerPaper:{width:function(e){return e.drawerWidth},backgroundColor:"#1b3460",color:"#fafafa"}}});function C(e){var a=e.drawerWidth,t=e.open,n=e.onClose,r=e.children,o=y({drawerWidth:a}),c=Object(j.a)(Object(v.a)().breakpoints.down("xs"));return l.a.createElement("nav",{className:o.drawer},l.a.createElement(O.a,Object.assign({classes:{paper:o.drawerPaper}},c?{variant:"temporary",ModalProps:{keepMounted:!0,BackdropProps:{invisible:!0}},open:t,onClose:n}:{variant:"permanent",open:!0}),l.a.createElement("div",{className:o.utilbar}),r))}var w=t(686),x=t(671),k=t(419),R=t.n(k),N=Object(p.a)(function(e){return{hidden:{display:"none"},invisible:{visibility:"hidden"},tabs:{marginTop:e.spacing(3)},tabRoot:{width:"70%",margin:"0.4rem auto",borderRadius:"0.5rem",minHeight:"2rem",textTransform:"none"},tabWrapper:{flexDirection:"row",justifyContent:"normal",alignItems:"baseline"},tabIcon:{marginRight:"1rem",marginBottom:0,fontSize:"0.7rem"},btnOnfocus:{backgroundColor:"#4366a7",color:"#38cc89"}}});function S(e){var a=N();return l.a.createElement(w.a,Object.assign({orientation:"vertical",className:a.tabs,classes:{indicator:a.hidden}},e),["Dashboard","Reports","Receipts"].map(function(t){return l.a.createElement(x.a,{key:t,component:d.b,to:"/".concat(t.toLowerCase()),icon:l.a.createElement(R.a,{className:"".concat(a.tabIcon," ").concat(t===e.value||a.invisible)}),label:t,value:t,classes:{root:a.tabRoot,wrapper:a.tabWrapper,selected:a.btnOnfocus}})}))}var T=t(197),P=t(235),I=t(420),W=t.n(I),B=Object(p.a)(function(e){var a;return{btnLoginUpload:(a={},Object(r.a)(a,e.breakpoints.up("sm"),{width:"9rem",height:"2.5rem",color:"#38cc89",borderColor:"#38cc89",textTransform:"none"}),Object(r.a)(a,"color","#38cc89"),a)}});function A(e){var a=B();return Object(j.a)(Object(v.a)().breakpoints.down("xs"))?l.a.createElement(P.a,null,l.a.createElement(W.a,Object.assign({className:a.btnLoginUpload},e))):l.a.createElement(T.a,Object.assign({variant:"outlined",className:a.btnLoginUpload},e),e.children)}var D=t(246),L=t(195),U=t(194),_=t(193),z=t(672),M=t(690),F=t(251),q=t(421),V=t.n(q),H=t(61),J=Object(p.a)(function(e){return{container:Object(r.a)({display:"flex",justifyContent:"space-between",alignItems:"center",margin:"0 2rem"},e.breakpoints.down("xs"),{margin:0}),avatar:{marginRight:"1rem"},text:Object(r.a)({},e.breakpoints.down("xs"),{display:"none"})}});function G(e){var a=J(),t=l.a.useState(!1),r=Object(n.a)(t,2),o=r[0],i=r[1],s=l.a.useRef(null),u=Object(c.useContext)(H.a),m=function(e){s.current&&s.current.contains(e.target)||i(!1)};function p(e){"Tab"===e.key&&(e.preventDefault(),i(!1))}var d=l.a.useRef(o);return l.a.useEffect(function(){!0===d.current&&!1===o&&s.current.focus(),d.current=o},[o]),l.a.createElement("div",{className:a.container},l.a.createElement(D.a,{alt:"User Avatar",src:V.a,className:a.avatar}),u.isLoggedIn&&l.a.createElement("div",null,l.a.createElement(T.a,{ref:s,"aria-controls":o?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:function(){i(function(e){return!e})}},u.userName),l.a.createElement(z.a,{open:o,anchorEl:s.current,role:void 0,transition:!0,disablePortal:!0},function(e){var a=e.TransitionProps,t=e.placement;return l.a.createElement(U.a,Object.assign({},a,{style:{transformOrigin:"bottom"===t?"center top":"center bottom"}}),l.a.createElement(_.a,null,l.a.createElement(L.a,{onClickAway:m},l.a.createElement(F.a,{autoFocusItem:o,id:"menu-list-grow",onKeyDown:p},l.a.createElement(M.a,{onClick:m},"Profile"),l.a.createElement(M.a,{onClick:m},"My account"),l.a.createElement(M.a,{onClick:u.logout},"Logout")))))})))}var X=t(199),K=t(138),Q=t.n(K),Y=Object(p.a)({menuButton:{width:"2rem",marginLeft:"0.8rem",marginRight:"auto",borderRadius:"50%",cursor:"pointer"}});function Z(e){var a=Y();return l.a.createElement(X.a,{smUp:!0},l.a.createElement("img",Object.assign({src:Q.a,alt:"logo",className:a.menuButton},e)))}var $=t(137),ee=t(328),ae=t(36),te=t.n(ae),ne=t(62),re=t(247),oe=t(88),ce=t(41),le=t(385),ie=t(85),se=t(86),ue=t(87),me=t(64),pe=t(330),de=t(126),be=t(63),fe=Object(p.a)(function(e){return{form:Object(r.a)({marginTop:e.spacing(1)},e.breakpoints.down("xs"),{width:"90%"}),dropzone:Object(r.a)({},e.breakpoints.down("xs"),{minHeight:"12rem"}),submit:{margin:e.spacing(3,0,2)}}}),ge=ce.b().shape({amount:ce.a().required("Amount is required")}),he=function(e){var a=fe(),t=Object(c.useState)(""),r=Object(n.a)(t,2),o=r[0],i=r[1],s=Object(c.useState)(""),m=Object(n.a)(s,2),p=m[0],d=m[1],b=Object(c.useState)([]),f=Object(n.a)(b,2),g=f[0],h=f[1],E=Object(c.useState)(""),O=Object(n.a)(E,2),v=(O[0],O[1]),j=Object(c.useState)([]),y=Object(n.a)(j,2),C=(y[0],y[1]),w=Object(c.useState)(""),x=Object(n.a)(w,2),k=x[0],R=x[1],N=Object(ie.a)(),S=N.isLoading,P=N.error,I=N.success,W=N.sendRequest,B=N.clearError,A=N.clearSuccess,D=Object(c.useContext)(H.a),L=Object(oe.a)({initialValues:{name:"",amount:"",category:""},validationSchema:ge,onSubmit:function(){var a=Object(ne.a)(te.a.mark(function a(t,n){var r;return te.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n.resetForm,t.name=k,r=[],"0"!==o&&(t.category=o);try{g.length>0&&g.forEach(function(){var a=Object(ne.a)(te.a.mark(function a(n){var o,c;return te.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o=n.name.split(".")[0],c=n.name.split(".")[1],a.prev=2,a.next=6,W("http://localhost:5000/api/sign_s3/","POST",JSON.stringify({fileName:o,fileType:c,userId:D.userId}),{"Content-Type":"application/json"}).then(function(a){console.log(a);var o=a.signedRequest,l=a.url;W(o,"PUT",n,{"Content-Type":c},!1).then(function(){r.push(l),r.length===g.length&&(console.log("making call to get save receipt"),W("http://localhost:5000/api/receipt","POST",JSON.stringify({title:t.name,user:D.userId,amount:t.amount,category:t.category,date:new Date,picture:r}),{"Content-Type":"application/json",Authorization:"Bearer "+D.token}),e.onReceiptUpload(),d("Receipt uploaded successfully!"))})});case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(2),be.a.logErrorInRollbar(a.t0);case 11:case"end":return a.stop()}},a,null,[[2,8]])}));return function(e){return a.apply(this,arguments)}}())}catch(c){be.a.logErrorInRollbar(c)}case 5:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}()}),U=L.handleSubmit,_=L.handleChange,z=L.handleBlur,M=L.errors,F=L.touched;L.isValid;return l.a.createElement(de.a,null,l.a.createElement(l.a.Fragment,null,l.a.createElement(se.a,{error:P,onClear:B}),""!==p&&l.a.createElement(ue.a,{success:I,successMessage:p,onClear:A}),S&&l.a.createElement(me.a,{asOverlay:!0}),l.a.createElement(u.a,{container:!0,spacing:5,margin:3,direction:"column",alignItems:"center",justify:"center"},l.a.createElement("form",{noValidate:!0,className:a.form,onSubmit:U},l.a.createElement(u.a,{item:!0,xs:12},l.a.createElement(re.a,{required:!0,fullWidth:!0,id:"name",label:"Name",name:"name",type:"text",value:k,autoComplete:"name",onChange:function(e){R(e.target.value)},helperText:F.name?M.name:"",error:F.name&&Boolean(M.name),autoFocus:!0})),l.a.createElement(u.a,{item:!0,xs:12},l.a.createElement(re.a,{required:!0,fullWidth:!0,id:"amount",label:"Amount",name:"amount",type:"number",onChange:_,onBlur:z,helperText:F.amount?M.amount:"",error:F.amount&&Boolean(M.amount)})),l.a.createElement(u.a,{item:!0,xs:12},l.a.createElement(pe.a,{name:"category",id:"category",title:"Category",handleChange:function(e){i(e.target.value)},helperText:F.category?M.category:"",error:F.category&&M.category})),l.a.createElement(u.a,{item:!0,xs:12},l.a.createElement(le.a,{classes:{root:a.dropzone},acceptedFiles:["image/*"],dropzoneText:"Drag and drop an image here or click",onChange:function(e){if(h(e),1===e.length){var a=new FormData;a.append("photo",e[0]),W("http://localhost:5000/api/user/base64","POST",a).then(function(e){var a=e.results.base64,t=Object({NODE_ENV:"production",PUBLIC_URL:"/truezie",REACT_APP_API_BASE_URL:"http://localhost:5000/api/",REACT_APP_ENV:"prod"}).REACT_APP_GOOGLE_VISION_API_ENDPOINT,n=JSON.stringify({requests:[{features:[{type:"TEXT_DETECTION",maxResults:5}],image:{content:a}}]});W(t,"POST",n,{Accept:"application/json","Content-Type":"application/json"}).then(function(e){if(v(e),"{}"!==JSON.stringify(e.data)){var a=e.responses[0].textAnnotations,t=[];a.forEach(function(e){e.description,t.push(e.description)}),C(t),R(t[1])}else console.log("No discernable text found.")})})}}})),l.a.createElement(T.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Save")))))},Ee="15rem",Oe=Object(p.a)(function(e){return{logoContainer:Object(o.a)({},e.mixins.toolbar,{position:"absolute",top:0,left:0,display:"flex",justifyContent:"center",alignItems:"center",width:"100%",margin:0}),logo:{width:"15%",marginRight:"2rem"}}});function ve(e){var a=Oe(),t=Object(j.a)(Object(v.a)().breakpoints.down("xs")),r=Object(c.useState)(!1),o=Object(n.a)(r,2),i=o[0],s=o[1],u=Object(c.useState)(!1),m=Object(n.a)(u,2),p=m[0],d=m[1],b=Object(c.useState)(!1),f=Object(n.a)(b,2),g=f[0],h=(f[1],function(){s(!i)}),O=function(){d(!0)};return l.a.createElement(de.a,null,l.a.createElement("header",null,l.a.createElement(E,{drawerWidth:Ee},l.a.createElement(Z,{onClick:h}),l.a.createElement(A,{onClick:O},"Upload Receipt"),l.a.createElement(G,null)),l.a.createElement(C,{drawerWidth:Ee,open:i,onClose:h},l.a.createElement($.a,{title:!0,logoStyle:a}),l.a.createElement(S,{value:e.page,onChange:e.onChange,onClick:t?h:null})),l.a.createElement(ee.a,{size:"md",isOpen:p,handleOpen:O,handleClose:function(){d(!1)},title:"Upload receipt"},l.a.createElement(he,{reloadTrans:g,onReceiptUpload:function(){e.onReceiptUpload(),d(!1)}}))))}var je=t(151),ye=Object(je.a)({props:{MuiButtonBase:{disableRipple:!0}},typography:{fontFamily:'"Montserrat", sans-serif',fontWeightRegular:600,fontWeightLight:400,fontWeightMedium:400}});t.d(a,"default",function(){return Re});var Ce=l.a.lazy(function(){return Promise.all([t.e(0),t.e(3),t.e(7)]).then(t.bind(null,687))}),we=l.a.lazy(function(){return t.e(9).then(t.bind(null,688))}),xe=l.a.lazy(function(){return Promise.all([t.e(0),t.e(8)]).then(t.bind(null,684))}),ke=Object(p.a)(function(e){return{utilbar:Object(o.a)({},e.mixins.toolbar,{backgroundColor:"#314f85",opacity:.4}),utilbarMain:{backgroundColor:"#fafafa"},main:Object(r.a)({display:"flex",flexDirection:"column",alignItems:"center",flexGrow:1,minHeight:"100vh",padding:e.spacing(3),overflowX:"hidden",backgroundColor:"#fafbff"},e.breakpoints.down("xs"),{marginTop:"3rem",padding:e.spacing(1)}),title:{maxHeight:"5.5rem"}}});function Re(e){var a=ke(),t=Object(ie.a)(),r=t.isLoading,o=t.error,p=t.clearError,f=Object(c.useState)("Dashboard"),g=Object(n.a)(f,2),h=g[0],E=g[1],O=Object(c.useState)(0),v=Object(n.a)(O,2),j=v[0],y=v[1],C=function(){y(j+1)},w=[{name:"Dashboard",component:l.a.createElement(Ce,{receiptCount:j})},{name:"Reports",component:l.a.createElement(xe,{receiptCount:j})},{name:"Receipts",component:l.a.createElement(we,{receiptCount:j,onReceiptUpload:C})}];return l.a.createElement(de.a,null,l.a.createElement(d.a,null,l.a.createElement(i.a,{display:"flex"},l.a.createElement(s.a,null),l.a.createElement(m.a,{theme:ye},l.a.createElement(ve,{page:h,onChange:function(e,a){E(a)},onReceiptUpload:C}),l.a.createElement("main",{className:a.main},l.a.createElement(se.a,{error:o,onClear:p}),r&&l.a.createElement(me.a,{asOverlay:!0}),l.a.createElement("div",{className:"".concat(a.utilbar," ").concat(a.utilbarMain)}),l.a.createElement(u.a,{container:!0,spacing:3,xs:12,lg:10,classes:{container:a.title}},l.a.createElement(u.a,{item:!0,xs:12},l.a.createElement("h2",null,h))),l.a.createElement(b.d,null,l.a.createElement(l.a.Suspense,{fallback:l.a.createElement("div",{className:"center"},l.a.createElement(me.a,{asOverlay:!0}))},w.map(function(e,a){var t=e.name,n=e.component;return l.a.createElement(b.b,{exact:!0,path:"/".concat(t.toLowerCase()),key:t},n)}))))))))}}}]);
//# sourceMappingURL=6.054c898a.chunk.js.map